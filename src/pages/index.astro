---
import { getCollection } from "astro:content";
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogPostItem from "../components/BlogPostItem.astro";
import BlogTag from "../components/BlogTag.astro";
const allPosts = await getCollection("posts");
const pgTitle ='首页';
const uniqueTags = [...new Set(allPosts.map((post) => post.data.tags).flat())];

---
<BaseLayout pgTitle={pgTitle}>
	<div class="w-full h-full flex my-10 px-6">
		<div class="w-9/12 mx-4 px-4">
			{allPosts.map((post) =>
			<BlogPostItem post = {post} />
			)}
		</div>
		<div class="w-1/4 mx-4 px-4 border-solid border-black border-l-2 flex flex-wrap">
			{uniqueTags.map((tag) =>
				<BlogTag tag={tag}/>
			)}
		</div>
	</div>
</BaseLayout>